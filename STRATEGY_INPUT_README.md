# ç­–ç•¥è¾“å…¥æ¨¡å— (Strategy Input) ä½¿ç”¨æŒ‡å—

## æ¦‚è¿°

ç­–ç•¥è¾“å…¥æ¨¡å—æ˜¯ Gate.io è‡ªåŠ¨åŒ–äº¤æ˜“ç³»ç»Ÿçš„æ ¸å¿ƒæ•°æ®æ”¶é›†ç»„ä»¶ï¼Œè´Ÿè´£ä» Gate.io API è·å–ã€æ¸…æ´—ã€éªŒè¯å’Œæ•´ç†äº¤æ˜“ç­–ç•¥æ‰€éœ€çš„å„ç±»æ•°æ®ã€‚

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- âœ… **å¸‚åœºæ•°æ®æ”¶é›†**: å®æ—¶è¡Œæƒ…ã€è®¢å•ç°¿ã€æˆäº¤è®°å½•ã€Kçº¿æ•°æ®
- âœ… **è´¦æˆ·æ•°æ®ç®¡ç†**: ä½™é¢æŸ¥è¯¢ã€è´¹ç‡ä¿¡æ¯ã€é£é™©è¯„ä¼°
- âœ… **è®¢å•æ•°æ®è·Ÿè¸ª**: æ´»è·ƒè®¢å•ã€å†å²è®¢å•ã€æˆäº¤è®°å½•
- âœ… **é…ç½®æ–‡ä»¶æ”¯æŒ**: çµæ´»çš„INIé…ç½®æ–‡ä»¶ç®¡ç†
- âœ… **æ•°æ®æ¸…æ´—éªŒè¯**: è‡ªåŠ¨æ•°æ®è´¨é‡æ£€æŸ¥å’Œæ¸…æ´—
- âœ… **é”™è¯¯å¤„ç†**: å®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œæ—¥å¿—è®°å½•

### è®¾è®¡ä¼˜åŠ¿
- ğŸ”„ **æ ‡å‡†åŒ–æ¥å£**: ç»Ÿä¸€çš„æ•°æ®ç»“æ„å’Œæ¥å£è®¾è®¡
- ğŸ›¡ï¸ **æ•°æ®å®‰å…¨**: ä½¿ç”¨é«˜ç²¾åº¦Decimalç±»å‹é¿å…æµ®ç‚¹è¯¯å·®
- ğŸ“Š **è´¨é‡è¯„ä¼°**: å†…ç½®æ•°æ®è´¨é‡è¯„åˆ†å’Œå¯é æ€§æ£€æŸ¥
- âš¡ **é«˜æ€§èƒ½**: ä¼˜åŒ–çš„APIè°ƒç”¨å’Œæ•°æ®å¤„ç†æµç¨‹
- ğŸ”§ **æ˜“äºæ‰©å±•**: æ¨¡å—åŒ–è®¾è®¡ï¼Œä¾¿äºæ·»åŠ æ–°åŠŸèƒ½

## é¡¹ç›®ç»“æ„

```
gateio/
â”œâ”€â”€ strategy_input.py      # æ ¸å¿ƒæ¨¡å—æ–‡ä»¶
â”œâ”€â”€ config.ini            # é…ç½®æ–‡ä»¶
â”œâ”€â”€ test.py               # å®Œæ•´æµ‹è¯•è„šæœ¬
â”œâ”€â”€ quick_test.py         # å¿«é€Ÿæµ‹è¯•è„šæœ¬
â”œâ”€â”€ example_usage.py      # ä½¿ç”¨ç¤ºä¾‹è„šæœ¬
â””â”€â”€ STRATEGY_INPUT_README.md  # æœ¬è¯´æ˜æ–‡æ¡£
```

## å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒé…ç½®

ç¡®ä¿å·²å®‰è£…å¿…è¦çš„ä¾èµ–ï¼š
```bash
pip install gate-api python-dotenv
```

åˆ›å»º `.env` æ–‡ä»¶é…ç½®APIå¯†é’¥ï¼š
```env
GATEIO_API_KEY=your_api_key_here
GATEIO_API_SECRET=your_api_secret_here
```

### 2. é…ç½®æ–‡ä»¶

ç¼–è¾‘ `config.ini` é…ç½®æ‚¨æ„Ÿå…´è¶£çš„äº¤æ˜“å¯¹å’Œç­–ç•¥å‚æ•°ï¼š

```ini
[trading]
trading_pairs = ETH_USDT, BTC_USDT, SOL_USDT, BNB_USDT
base_currency = USDT
intervals = 1m, 5m, 15m, 1h, 1d

[strategy]
strategy_name = my_strategy
max_position_size = 0.1
min_order_size = 10
```

### 3. åŸºæœ¬ä½¿ç”¨

```python
from strategy_input import create_strategy_input_manager_from_config

# åˆ›å»ºç®¡ç†å™¨
manager = create_strategy_input_manager_from_config()

# æ”¶é›†ç­–ç•¥è¾“å…¥æ•°æ®
strategy_input = manager.collect_strategy_input(['1m', '5m', '1h'])

# è®¿é—®å¸‚åœºæ•°æ®
for pair, ticker in strategy_input.market_data.tickers.items():
    print(f"{pair}: {ticker.last_price}")

# è®¿é—®è´¦æˆ·æ•°æ®
print(f"æ€»æƒç›Š: {strategy_input.account_data.total_equity} USDT")
```

## æµ‹è¯•éªŒè¯

### å¿«é€Ÿæµ‹è¯•
```bash
python quick_test.py
```

### å®Œæ•´æµ‹è¯•
```bash
python test.py
```
é€‰æ‹©æµ‹è¯•é¡¹ç›®ï¼š
- 1: é…ç½®æ–‡ä»¶åŠ è½½æµ‹è¯•
- 2: APIè¿æ¥æµ‹è¯•
- 3: å¸‚åœºæ•°æ®æ”¶é›†æµ‹è¯•
- 4: è´¦æˆ·æ•°æ®æ”¶é›†æµ‹è¯•
- 5: è®¢å•æ•°æ®æ”¶é›†æµ‹è¯•
- 6: å®Œæ•´ç­–ç•¥è¾“å…¥æ”¶é›†æµ‹è¯•
- 7: æ•°æ®æŒä¹…åŒ–æµ‹è¯•
- 8: æ€§èƒ½æµ‹è¯•
- 9: è¿è¡Œæ‰€æœ‰æµ‹è¯•

### ä½¿ç”¨ç¤ºä¾‹
```bash
python example_usage.py
```

## æ•°æ®ç»“æ„è¯´æ˜

### ç­–ç•¥è¾“å…¥ (StrategyInput)
```python
@dataclass
class StrategyInput:
    market_data: MarketDataInput      # å¸‚åœºæ•°æ®
    account_data: AccountDataInput    # è´¦æˆ·æ•°æ®
    order_data: OrderDataInput        # è®¢å•æ•°æ®
    config: ConfigInput               # é…ç½®æ•°æ®
    external_signals: ExternalSignalInput  # å¤–éƒ¨ä¿¡å·
    input_id: str                     # è¾“å…¥å”¯ä¸€ID
    collection_start_time: datetime   # æ”¶é›†å¼€å§‹æ—¶é—´
    collection_end_time: datetime     # æ”¶é›†ç»“æŸæ—¶é—´
    data_completeness: Dict[str, Decimal]  # æ•°æ®å®Œæ•´æ€§è¯„åˆ†
```

### å¸‚åœºæ•°æ® (MarketDataInput)
- **tickers**: å®æ—¶è¡Œæƒ…æ•°æ®
- **orderbooks**: è®¢å•ç°¿æ•°æ®
- **recent_trades**: æœ€è¿‘æˆäº¤è®°å½•
- **candles**: Kçº¿æ•°æ®ï¼ˆå¤šæ—¶é—´å‘¨æœŸï¼‰
- **data_reliability**: æ•°æ®å¯é æ€§è¯„åˆ†

### è´¦æˆ·æ•°æ® (AccountDataInput)
- **spot_balances**: ç°è´§ä½™é¢
- **trading_fees**: äº¤æ˜“è´¹ç‡
- **total_equity**: æ€»æƒç›Š
- **risk_level**: é£é™©ç­‰çº§

## é…ç½®è¯´æ˜

### äº¤æ˜“é…ç½® [trading]
- `trading_pairs`: ç›‘æ§çš„äº¤æ˜“å¯¹åˆ—è¡¨
- `base_currency`: åŸºç¡€è´§å¸ï¼ˆé€šå¸¸ä¸ºUSDTï¼‰
- `intervals`: Kçº¿æ—¶é—´é—´éš”

### ç­–ç•¥é…ç½® [strategy]
- `strategy_name`: ç­–ç•¥åç§°
- `max_position_size`: æœ€å¤§ä»“ä½æ¯”ä¾‹
- `min_order_size`: æœ€å°è®¢å•é‡‘é¢
- `decision_interval`: å†³ç­–é—´éš”ï¼ˆç§’ï¼‰

### é£é™©ç®¡ç† [risk_management]
- `max_daily_loss`: æœ€å¤§æ—¥æŸå¤±
- `max_positions`: æœ€å¤§åŒæ—¶æŒä»“æ•°
- `max_order_amount`: å•ç¬”æœ€å¤§è®¢å•é‡‘é¢

## API æ¥å£è¯´æ˜

### ä¸»è¦ç±»

#### ConfigManager
é…ç½®æ–‡ä»¶ç®¡ç†å™¨
```python
config_manager = ConfigManager("config.ini")
trading_pairs = config_manager.get_trading_pairs()
strategy_config = config_manager.get_strategy_config()
```

#### StrategyInputManager
ç­–ç•¥è¾“å…¥ç®¡ç†å™¨
```python
manager = create_strategy_input_manager_from_config()
strategy_input = manager.collect_strategy_input(['1m', '5m'])
clean_input = manager.clean_and_validate_input(strategy_input)
quality_report = manager.get_data_quality_report(clean_input)
```

### æ•°æ®æ”¶é›†å™¨

#### MarketDataCollector
- `get_ticker_data()`: è·å–è¡Œæƒ…æ•°æ®
- `get_orderbook_data()`: è·å–è®¢å•ç°¿æ•°æ®
- `get_recent_trades()`: è·å–æˆäº¤è®°å½•
- `get_candle_data()`: è·å–Kçº¿æ•°æ®

#### AccountDataCollector
- `get_spot_balances()`: è·å–ç°è´§ä½™é¢
- `get_trading_fees()`: è·å–äº¤æ˜“è´¹ç‡
- `collect_account_data()`: æ”¶é›†å®Œæ•´è´¦æˆ·æ•°æ®

#### OrderDataCollector
- `get_active_orders()`: è·å–æ´»è·ƒè®¢å•
- `get_recent_orders()`: è·å–å†å²è®¢å•
- `get_trade_history()`: è·å–æˆäº¤å†å²

## é”™è¯¯å¤„ç†

æ¨¡å—å†…ç½®å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼š

### ç½‘ç»œé”™è¯¯
- è‡ªåŠ¨é‡è¯•æœºåˆ¶
- APIé™é¢‘å¤„ç†
- è¿æ¥è¶…æ—¶å¤„ç†

### æ•°æ®é”™è¯¯
- æ— æ•ˆæ•°æ®è¿‡æ»¤
- æ•°æ®ç±»å‹éªŒè¯
- ç²¾åº¦è½¬æ¢ä¿æŠ¤

### é…ç½®é”™è¯¯
- é…ç½®æ–‡ä»¶éªŒè¯
- é»˜è®¤å€¼å›é€€
- å‚æ•°ç±»å‹æ£€æŸ¥

## æ€§èƒ½ä¼˜åŒ–

### æ•°æ®æ”¶é›†ä¼˜åŒ–
- å¹¶è¡ŒAPIè°ƒç”¨
- æ•°æ®ç¼“å­˜æœºåˆ¶
- å¢é‡æ›´æ–°æ”¯æŒ

### å†…å­˜ä¼˜åŒ–
- æ•°æ®ç»“æ„ä¼˜åŒ–
- åŠæ—¶é‡Šæ”¾èµ„æº
- æ‰¹é‡å¤„ç†æœºåˆ¶

## æœ€ä½³å®è·µ

### 1. é…ç½®ç®¡ç†
- ä½¿ç”¨åˆç†çš„äº¤æ˜“å¯¹æ•°é‡ï¼ˆå»ºè®®10ä¸ªä»¥å†…ï¼‰
- æ ¹æ®ç­–ç•¥éœ€æ±‚é€‰æ‹©æ—¶é—´é—´éš”
- å®šæœŸæ£€æŸ¥å’Œæ›´æ–°é…ç½®

### 2. é”™è¯¯å¤„ç†
- ç›‘æ§æ—¥å¿—è¾“å‡º
- æ£€æŸ¥æ•°æ®è´¨é‡æŠ¥å‘Š
- è®¾ç½®åˆç†çš„é‡è¯•æœºåˆ¶

### 3. æ€§èƒ½ä¼˜åŒ–
- é¿å…é¢‘ç¹çš„å®Œæ•´æ•°æ®æ”¶é›†
- ä½¿ç”¨å¢é‡æ›´æ–°
- ç›‘æ§APIè°ƒç”¨é¢‘ç‡

### 4. æ•°æ®éªŒè¯
- å®šæœŸè¿è¡Œæµ‹è¯•è„šæœ¬
- æ£€æŸ¥æ•°æ®å®Œæ•´æ€§è¯„åˆ†
- éªŒè¯æ•°æ®æ—¶æ•ˆæ€§

## æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

#### 1. APIå¯†é’¥é”™è¯¯
```
âŒ APIè¿æ¥æµ‹è¯•å¤±è´¥
```
**è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„APIå¯†é’¥é…ç½®

#### 2. äº¤æ˜“å¯¹æ— æ•ˆ
```
WARNING - Ticker data not found for MATIC_USDT
```
**è§£å†³æ–¹æ¡ˆ**: åœ¨ `config.ini` ä¸­æ›´æ–°äº¤æ˜“å¯¹åˆ—è¡¨

#### 3. æ•°æ®è´¨é‡ä½
```
data_reliability: 0.3
```
**è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œé‡æ–°æ”¶é›†æ•°æ®

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è°ƒè¯•æ¨¡å¼è·å–è¯¦ç»†æ—¥å¿—ï¼š
```ini
[environment]
debug_mode = true
log_level = DEBUG
```

## æ‰©å±•å¼€å‘

### æ·»åŠ æ–°çš„æ•°æ®æº
1. ç»§æ‰¿ç›¸åº”çš„æ”¶é›†å™¨åŸºç±»
2. å®ç°æ•°æ®è·å–æ–¹æ³•
3. æ·»åŠ æ•°æ®éªŒè¯é€»è¾‘
4. æ›´æ–°é…ç½®æ–‡ä»¶ç»“æ„

### è‡ªå®šä¹‰æ•°æ®å¤„ç†
1. åˆ›å»ºæ–°çš„æ•°æ®ç»“æ„
2. å®ç°æ•°æ®è½¬æ¢é€»è¾‘
3. æ·»åŠ è´¨é‡è¯„ä¼°æ–¹æ³•
4. é›†æˆåˆ°ä¸»æµç¨‹ä¸­

## ç‰ˆæœ¬å†å²

- **v1.0.0**: åˆå§‹ç‰ˆæœ¬ï¼ŒåŸºç¡€åŠŸèƒ½å®Œæ•´
- æ”¯æŒé…ç½®æ–‡ä»¶ç®¡ç†
- å®Œæ•´çš„æ•°æ®æ”¶é›†åŠŸèƒ½
- æ•°æ®æ¸…æ´—å’ŒéªŒè¯
- æµ‹è¯•è„šæœ¬å’Œä½¿ç”¨ç¤ºä¾‹

## è”ç³»æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜æˆ–éœ€è¦åŠŸèƒ½å»ºè®®ï¼Œè¯·ï¼š
1. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶äº†è§£è¯¦ç»†é”™è¯¯ä¿¡æ¯
2. è¿è¡Œæµ‹è¯•è„šæœ¬è¿›è¡Œè¯Šæ–­
3. æ£€æŸ¥é…ç½®æ–‡ä»¶è®¾ç½®
4. å‚è€ƒä½¿ç”¨ç¤ºä¾‹å’Œæœ€ä½³å®è·µ

---

**æ³¨æ„**: æœ¬æ¨¡å—ç”¨äºæ•™è‚²å’Œç ”ç©¶ç›®çš„ã€‚å®é™…äº¤æ˜“æ—¶è¯·å……åˆ†äº†è§£é£é™©ï¼Œè°¨æ…æ“ä½œã€‚ 