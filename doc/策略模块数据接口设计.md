# ç­–ç•¥æ¨¡å—æ•°æ®æ¥å£è®¾è®¡

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£å°†ç­–ç•¥æ¨¡å—è§†ä¸ºé»‘ç›’ï¼Œä¸“æ³¨äºå®šä¹‰å…¶æ ‡å‡†åŒ–çš„è¾“å…¥è¾“å‡ºæ•°æ®ç»“æ„ã€‚æ˜ç¡®æ•°æ®è·å–é€”å¾„ã€å…³é”®å†…å®¹ã€å­˜å‚¨æ–¹å¼å’Œäº¤æ˜“æ‰§è¡Œçš„ç²¾ç¡®è¦æ±‚ã€‚

## ğŸ¯ è®¾è®¡åŸåˆ™

1. **æ•°æ®æ ‡å‡†åŒ–**: ç»Ÿä¸€ä¸åŒæ•°æ®æºçš„æ ¼å¼
2. **ç²¾åº¦ä¿è¯**: ç¡®ä¿ä»·æ ¼å’Œæ•°é‡çš„ç²¾ç¡®æ€§
3. **æ—¶æ•ˆæ€§**: æ”¯æŒå®æ—¶å’Œå†å²æ•°æ®
4. **å¯æ‰©å±•æ€§**: æ”¯æŒæ–°çš„æ•°æ®ç±»å‹å’Œå­—æ®µ
5. **å®Œæ•´æ€§**: åŒ…å«ç­–ç•¥å†³ç­–æ‰€éœ€çš„å…¨éƒ¨ä¿¡æ¯

## ğŸ“¥ è¾“å…¥æ•°æ®ç»“æ„è®¾è®¡

### 1. å¸‚åœºæ•°æ® (MarketDataInput)

```python
from dataclasses import dataclass
from typing import List, Dict, Optional, Union
from decimal import Decimal
import datetime

@dataclass
class TickerData:
    """è¡Œæƒ…æ•°æ®"""
    currency_pair: str          # äº¤æ˜“å¯¹ï¼Œå¦‚ "BTC_USDT"
    last_price: Decimal         # æœ€æ–°æˆäº¤ä»·ï¼Œç²¾åº¦åˆ°8ä½å°æ•°
    bid_price: Decimal          # ä¹°ä¸€ä»·
    ask_price: Decimal          # å–ä¸€ä»·
    bid_volume: Decimal         # ä¹°ä¸€é‡
    ask_volume: Decimal         # å–ä¸€é‡
    high_24h: Decimal          # 24å°æ—¶æœ€é«˜ä»·
    low_24h: Decimal           # 24å°æ—¶æœ€ä½ä»·
    volume_24h: Decimal        # 24å°æ—¶æˆäº¤é‡
    volume_24h_quote: Decimal  # 24å°æ—¶æˆäº¤é¢
    change_24h: Decimal        # 24å°æ—¶æ¶¨è·Œå¹… (-1.0 to 1.0)
    timestamp: datetime.datetime  # æ•°æ®æ—¶é—´æˆ³
    
@dataclass
class OrderBookLevel:
    """è®¢å•ç°¿å•çº§æ•°æ®"""
    price: Decimal             # ä»·æ ¼
    volume: Decimal            # æ•°é‡
    
@dataclass
class OrderBookData:
    """è®¢å•ç°¿æ•°æ®"""
    currency_pair: str
    asks: List[OrderBookLevel]  # å–å•ï¼ŒæŒ‰ä»·æ ¼å‡åº
    bids: List[OrderBookLevel]  # ä¹°å•ï¼ŒæŒ‰ä»·æ ¼é™åº
    timestamp: datetime.datetime
    sequence: int              # åºåˆ—å·ï¼Œç”¨äºæ•°æ®ä¸€è‡´æ€§
    
@dataclass
class TradeData:
    """æˆäº¤è®°å½•"""
    trade_id: str
    currency_pair: str
    price: Decimal
    volume: Decimal
    side: str                  # "buy" æˆ– "sell"
    timestamp: datetime.datetime
    
@dataclass
class CandleData:
    """Kçº¿æ•°æ®"""
    currency_pair: str
    interval: str              # "1m", "5m", "1h", "1d" ç­‰
    open_time: datetime.datetime
    close_time: datetime.datetime
    open_price: Decimal
    high_price: Decimal
    low_price: Decimal
    close_price: Decimal
    volume: Decimal           # åŸºç¡€è´§å¸æˆäº¤é‡
    quote_volume: Decimal     # è®¡ä»·è´§å¸æˆäº¤é‡
    trade_count: int          # æˆäº¤ç¬”æ•°
    
@dataclass
class MarketDataInput:
    """å¸‚åœºæ•°æ®è¾“å…¥é›†åˆ"""
    # å®æ—¶æ•°æ®
    tickers: Dict[str, TickerData]           # key: currency_pair
    orderbooks: Dict[str, OrderBookData]     # key: currency_pair
    recent_trades: Dict[str, List[TradeData]] # key: currency_pair
    
    # å†å²æ•°æ®
    candles: Dict[str, Dict[str, List[CandleData]]]  # key: currency_pair, interval
    
    # æ•°æ®è´¨é‡æŒ‡æ ‡
    data_freshness: Dict[str, datetime.datetime]  # å„æ•°æ®æºæœ€åæ›´æ–°æ—¶é—´
    data_reliability: Dict[str, float]            # æ•°æ®å¯é æ€§è¯„åˆ† 0-1
    
    # å…ƒæ•°æ®
    collection_timestamp: datetime.datetime       # æ•°æ®æ”¶é›†æ—¶é—´
    data_source: str                             # æ•°æ®æ¥æºæ ‡è¯†
```

### 2. è´¦æˆ·æ•°æ® (AccountDataInput)

```python
@dataclass
class BalanceInfo:
    """ä½™é¢ä¿¡æ¯"""
    currency: str
    available: Decimal         # å¯ç”¨ä½™é¢
    locked: Decimal           # å†»ç»“ä½™é¢
    total: Decimal            # æ€»ä½™é¢
    btc_value: Decimal        # BTCä¼°å€¼
    usd_value: Decimal        # USDä¼°å€¼
    
@dataclass
class PositionInfo:
    """æŒä»“ä¿¡æ¯"""
    currency_pair: str
    side: str                 # "long" æˆ– "short"
    size: Decimal            # æŒä»“æ•°é‡
    entry_price: Decimal     # å¹³å‡å¼€ä»“ä»·
    mark_price: Decimal      # æ ‡è®°ä»·æ ¼
    unrealized_pnl: Decimal  # æœªå®ç°ç›ˆäº
    margin: Decimal          # ä¿è¯é‡‘
    leverage: Decimal        # æ æ†å€æ•°
    
@dataclass
class TradingFeeInfo:
    """äº¤æ˜“è´¹ç‡ä¿¡æ¯"""
    currency_pair: str
    maker_fee: Decimal       # Makerè´¹ç‡
    taker_fee: Decimal       # Takerè´¹ç‡
    volume_tier: str         # è´¹ç‡ç­‰çº§
    
@dataclass
class AccountDataInput:
    """è´¦æˆ·æ•°æ®è¾“å…¥"""
    # ä½™é¢ä¿¡æ¯
    spot_balances: Dict[str, BalanceInfo]     # ç°è´§ä½™é¢
    futures_balances: Dict[str, BalanceInfo]  # æœŸè´§ä½™é¢
    margin_balances: Dict[str, BalanceInfo]   # æ æ†ä½™é¢
    
    # æŒä»“ä¿¡æ¯
    positions: Dict[str, PositionInfo]        # key: currency_pair
    
    # äº¤æ˜“è´¹ç‡
    trading_fees: Dict[str, TradingFeeInfo]   # key: currency_pair
    
    # è´¦æˆ·é£é™©æŒ‡æ ‡
    total_equity: Decimal                     # æ€»æƒç›Š
    available_margin: Decimal                 # å¯ç”¨ä¿è¯é‡‘
    margin_ratio: Decimal                     # ä¿è¯é‡‘æ¯”ç‡
    risk_level: str                          # é£é™©ç­‰çº§ï¼š"low", "medium", "high"
    
    # æ—¶é—´æˆ³
    update_timestamp: datetime.datetime
```

### 3. è®¢å•æ•°æ® (OrderDataInput)

```python
@dataclass
class OrderInfo:
    """è®¢å•ä¿¡æ¯"""
    order_id: str
    client_order_id: Optional[str]
    currency_pair: str
    side: str                    # "buy" æˆ– "sell"
    type: str                   # "limit", "market", "stop"
    status: str                 # "open", "filled", "cancelled", "partial"
    amount: Decimal             # è®¢å•æ•°é‡
    price: Optional[Decimal]    # è®¢å•ä»·æ ¼ï¼ˆå¸‚ä»·å•å¯ä¸ºNoneï¼‰
    filled_amount: Decimal      # å·²æˆäº¤æ•°é‡
    remaining_amount: Decimal   # å‰©ä½™æ•°é‡
    average_price: Optional[Decimal]  # å¹³å‡æˆäº¤ä»·
    fee: Decimal               # æ‰‹ç»­è´¹
    fee_currency: str          # æ‰‹ç»­è´¹å¸ç§
    create_time: datetime.datetime
    update_time: datetime.datetime
    
@dataclass
class TradeHistory:
    """æˆäº¤å†å²"""
    trade_id: str
    order_id: str
    currency_pair: str
    side: str
    amount: Decimal
    price: Decimal
    fee: Decimal
    fee_currency: str
    timestamp: datetime.datetime
    
@dataclass
class OrderDataInput:
    """è®¢å•æ•°æ®è¾“å…¥"""
    # å½“å‰æ´»è·ƒè®¢å•
    active_orders: Dict[str, OrderInfo]      # key: order_id
    
    # å†å²è®¢å•ï¼ˆæœ€è¿‘Nä¸ªï¼‰
    recent_orders: List[OrderInfo]
    
    # æˆäº¤å†å²ï¼ˆæœ€è¿‘Nä¸ªï¼‰
    trade_history: List[TradeHistory]
    
    # è®¢å•ç»Ÿè®¡
    order_stats: Dict[str, Union[int, Decimal]]  # ç»Ÿè®¡ä¿¡æ¯
    
    update_timestamp: datetime.datetime
```

### 4. é…ç½®å‚æ•° (ConfigInput)

```python
@dataclass
class StrategyConfig:
    """ç­–ç•¥é…ç½®å‚æ•°"""
    strategy_name: str
    strategy_version: str
    
    # åŸºç¡€å‚æ•°
    trading_pairs: List[str]
    base_currency: str          # åŸºç¡€è®¡ä»·è´§å¸
    max_position_size: Decimal  # æœ€å¤§ä»“ä½
    min_order_size: Decimal     # æœ€å°è®¢å•å¤§å°
    
    # æ—¶é—´å‚æ•°
    decision_interval: int      # å†³ç­–é—´éš”ï¼ˆç§’ï¼‰
    data_window: int           # æ•°æ®çª—å£å¤§å°
    
    # ç­–ç•¥ç‰¹å®šå‚æ•°
    strategy_params: Dict[str, Union[str, int, float, Decimal]]
    
    # é£é™©å‚æ•°
    max_drawdown: Decimal      # æœ€å¤§å›æ’¤
    stop_loss: Optional[Decimal]  # æ­¢æŸæ¯”ä¾‹
    take_profit: Optional[Decimal]  # æ­¢ç›ˆæ¯”ä¾‹
    
@dataclass
class ConfigInput:
    """é…ç½®è¾“å…¥"""
    strategy_config: StrategyConfig
    environment: str           # "test", "simulation", "live"
    debug_mode: bool
    logging_level: str
    
    # æ›´æ–°æ—¶é—´
    config_timestamp: datetime.datetime
```

### 5. å¤–éƒ¨ä¿¡å· (ExternalSignalInput)

```python
@dataclass
class MarketSignal:
    """å¸‚åœºä¿¡å·"""
    signal_type: str           # "technical", "fundamental", "news"
    signal_name: str           # ä¿¡å·åç§°
    value: Union[str, Decimal] # ä¿¡å·å€¼
    strength: Decimal          # ä¿¡å·å¼ºåº¦ 0-1
    confidence: Decimal        # ä¿¡å·ç½®ä¿¡åº¦ 0-1
    timestamp: datetime.datetime
    source: str               # ä¿¡å·æ¥æº
    
@dataclass
class ExternalSignalInput:
    """å¤–éƒ¨ä¿¡å·è¾“å…¥"""
    market_signals: List[MarketSignal]
    
    # æ–°é—»æƒ…æ„Ÿåˆ†æ
    news_sentiment: Optional[Decimal]  # -1 åˆ° 1
    
    # æŠ€æœ¯æŒ‡æ ‡ä¿¡å·
    technical_signals: Dict[str, Decimal]
    
    # å®è§‚ç»æµæŒ‡æ ‡
    macro_indicators: Dict[str, Decimal]
    
    update_timestamp: datetime.datetime
```

## ğŸ“¤ è¾“å‡ºæ•°æ®ç»“æ„è®¾è®¡

### 1. äº¤æ˜“ä¿¡å· (TradingSignal)

```python
@dataclass
class TradingAction:
    """å…·ä½“äº¤æ˜“åŠ¨ä½œ"""
    action_type: str           # "BUY", "SELL", "HOLD", "CLOSE"
    currency_pair: str
    
    # è®¢å•å‚æ•°
    order_type: str           # "MARKET", "LIMIT", "STOP", "STOP_LIMIT"
    quantity: Decimal         # äº¤æ˜“æ•°é‡ï¼Œç²¾åº¦åˆ°8ä½å°æ•°
    price: Optional[Decimal]  # é™ä»·å•ä»·æ ¼
    stop_price: Optional[Decimal]  # æ­¢æŸä»·æ ¼
    
    # æ‰§è¡Œå‚æ•°
    time_in_force: str        # "GTC", "IOC", "FOK"
    urgency: str             # "LOW", "MEDIUM", "HIGH"
    max_slippage: Decimal    # æœ€å¤§æ»‘ç‚¹å®¹å¿åº¦
    
    # é£é™©æ§åˆ¶
    stop_loss_price: Optional[Decimal]    # æ­¢æŸä»·
    take_profit_price: Optional[Decimal]  # æ­¢ç›ˆä»·
    position_sizing: Decimal              # ä»“ä½å¤§å°æ¯”ä¾‹
    
@dataclass 
class TradingSignal:
    """äº¤æ˜“ä¿¡å·è¾“å‡º"""
    signal_id: str                        # å”¯ä¸€ä¿¡å·ID
    strategy_name: str                    # ç­–ç•¥åç§°
    
    # ä¸»è¦äº¤æ˜“åŠ¨ä½œ
    primary_action: TradingAction
    
    # å¤‡é€‰åŠ¨ä½œï¼ˆå¦‚æœä¸»åŠ¨ä½œå¤±è´¥ï¼‰
    fallback_actions: List[TradingAction]
    
    # ä¿¡å·å±æ€§
    signal_strength: Decimal              # ä¿¡å·å¼ºåº¦ 0-1
    confidence_level: Decimal             # ç½®ä¿¡åº¦ 0-1
    expected_profit: Optional[Decimal]    # é¢„æœŸæ”¶ç›Š
    max_risk: Optional[Decimal]          # æœ€å¤§é£é™©
    
    # æ—¶é—´å±æ€§
    generate_time: datetime.datetime      # ä¿¡å·ç”Ÿæˆæ—¶é—´
    expiry_time: Optional[datetime.datetime]  # ä¿¡å·è¿‡æœŸæ—¶é—´
    execution_deadline: Optional[datetime.datetime]  # æ‰§è¡Œæˆªæ­¢æ—¶é—´
    
    # å†³ç­–ä¾æ®
    decision_factors: Dict[str, Union[str, Decimal]]  # å†³ç­–å› å­
    used_data_timestamp: datetime.datetime            # ä½¿ç”¨çš„æ•°æ®æ—¶é—´æˆ³
    
    # ç›¸å…³æ€§
    related_signals: List[str]            # ç›¸å…³ä¿¡å·IDåˆ—è¡¨
    signal_group: Optional[str]           # ä¿¡å·ç»„ï¼ˆç”¨äºæ‰¹é‡å¤„ç†ï¼‰
```

### 2. é£é™©è¯„ä¼° (RiskAssessment)

```python
@dataclass
class PositionRisk:
    """ä»“ä½é£é™©è¯„ä¼°"""
    currency_pair: str
    current_exposure: Decimal             # å½“å‰æ•å£
    var_1d: Decimal                      # 1æ—¥VaR
    expected_shortfall: Decimal          # é¢„æœŸæŸå¤±
    max_drawdown_estimate: Decimal       # æœ€å¤§å›æ’¤ä¼°è®¡
    correlation_risk: Decimal            # ç›¸å…³æ€§é£é™©
    
@dataclass
class MarketRisk:
    """å¸‚åœºé£é™©è¯„ä¼°"""
    volatility_regime: str               # "LOW", "MEDIUM", "HIGH"
    market_trend: str                    # "BULL", "BEAR", "SIDEWAYS"
    liquidity_risk: Decimal             # æµåŠ¨æ€§é£é™© 0-1
    execution_risk: Decimal             # æ‰§è¡Œé£é™© 0-1
    
@dataclass
class RiskAssessment:
    """é£é™©è¯„ä¼°è¾“å‡º"""
    assessment_id: str
    assessment_time: datetime.datetime
    
    # æ•´ä½“é£é™©
    overall_risk_score: Decimal          # æ€»ä½“é£é™©è¯„åˆ† 0-100
    risk_level: str                      # "LOW", "MEDIUM", "HIGH", "CRITICAL"
    
    # å…·ä½“é£é™©ç±»åˆ«
    position_risks: Dict[str, PositionRisk]  # key: currency_pair
    market_risk: MarketRisk
    
    # é£é™©é™åˆ¶å»ºè®®
    recommended_position_limit: Dict[str, Decimal]  # å»ºè®®ä»“ä½é™åˆ¶
    risk_warnings: List[str]             # é£é™©è­¦å‘Šåˆ—è¡¨
    
    # åº”å¯¹å»ºè®®
    risk_mitigation_actions: List[str]   # é£é™©ç¼“è§£å»ºè®®
```

### 3. æ‰§è¡ŒæŒ‡ä»¤ (ExecutionInstruction)

```python
@dataclass
class OrderInstruction:
    """è®¢å•æ‰§è¡ŒæŒ‡ä»¤"""
    instruction_id: str
    parent_signal_id: str                # å¯¹åº”çš„äº¤æ˜“ä¿¡å·ID
    
    # è®¢å•è¯¦æƒ…
    currency_pair: str
    side: str                           # "buy", "sell"
    order_type: str                     # "limit", "market", "stop_limit"
    quantity: Decimal                   # ç²¾ç¡®åˆ°8ä½å°æ•°
    price: Optional[Decimal]            # ç²¾ç¡®åˆ°6ä½å°æ•°
    stop_price: Optional[Decimal]
    
    # æ‰§è¡Œæ§åˆ¶
    time_in_force: str                  # "gtc", "ioc", "fok"
    client_order_id: str                # å®¢æˆ·ç«¯è®¢å•ID
    post_only: bool                     # æ˜¯å¦åªåšMaker
    reduce_only: bool                   # æ˜¯å¦åªå‡ä»“
    
    # æ¡ä»¶æ‰§è¡Œ
    trigger_condition: Optional[str]     # è§¦å‘æ¡ä»¶
    trigger_price: Optional[Decimal]     # è§¦å‘ä»·æ ¼
    
    # èµ„é‡‘ç®¡ç†
    max_position_ratio: Decimal         # æœ€å¤§ä»“ä½æ¯”ä¾‹
    
@dataclass
class PositionManagement:
    """ä»“ä½ç®¡ç†æŒ‡ä»¤"""
    currency_pair: str
    action: str                         # "INCREASE", "DECREASE", "CLOSE", "HEDGE"
    target_position: Decimal            # ç›®æ ‡ä»“ä½
    adjustment_method: str              # "GRADUAL", "IMMEDIATE"
    time_horizon: Optional[int]         # è°ƒæ•´æ—¶é—´çª—å£ï¼ˆç§’ï¼‰
    
@dataclass
class ExecutionInstruction:
    """æ‰§è¡ŒæŒ‡ä»¤è¾“å‡º"""
    instruction_id: str
    strategy_name: str
    create_time: datetime.datetime
    
    # è®¢å•æŒ‡ä»¤
    order_instructions: List[OrderInstruction]
    
    # ä»“ä½ç®¡ç†
    position_management: List[PositionManagement]
    
    # æ‰§è¡Œä¼˜å…ˆçº§
    priority: str                       # "LOW", "MEDIUM", "HIGH", "URGENT"
    batch_execution: bool               # æ˜¯å¦æ‰¹é‡æ‰§è¡Œ
    
    # æ‰§è¡Œçº¦æŸ
    max_execution_time: int             # æœ€å¤§æ‰§è¡Œæ—¶é—´ï¼ˆç§’ï¼‰
    max_slippage_tolerance: Decimal     # æœ€å¤§æ»‘ç‚¹å®¹å¿åº¦
    
    # æ¡ä»¶æ£€æŸ¥
    pre_execution_checks: List[str]     # æ‰§è¡Œå‰æ£€æŸ¥é¡¹
    risk_checks_required: bool          # æ˜¯å¦éœ€è¦é£é™©æ£€æŸ¥
```

### 4. çŠ¶æ€ä¿¡æ¯ (StatusOutput)

```python
@dataclass
class StrategyPerformance:
    """ç­–ç•¥æ€§èƒ½ç»Ÿè®¡"""
    total_trades: int
    winning_trades: int
    losing_trades: int
    win_rate: Decimal
    total_pnl: Decimal
    max_drawdown: Decimal
    sharpe_ratio: Optional[Decimal]
    avg_holding_time: Optional[int]     # å¹³å‡æŒä»“æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰
    
@dataclass
class StrategyStatus:
    """ç­–ç•¥çŠ¶æ€"""
    strategy_name: str
    status: str                         # "RUNNING", "PAUSED", "STOPPED", "ERROR"
    health_score: Decimal              # å¥åº·åº¦è¯„åˆ† 0-100
    
    # è¿è¡Œç»Ÿè®¡
    uptime: int                        # è¿è¡Œæ—¶é—´ï¼ˆç§’ï¼‰
    last_signal_time: Optional[datetime.datetime]
    signal_frequency: Decimal          # ä¿¡å·é¢‘ç‡ï¼ˆæ¬¡/å°æ—¶ï¼‰
    
    # æ•°æ®çŠ¶æ€
    data_lag: int                      # æ•°æ®å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰
    data_quality_score: Decimal       # æ•°æ®è´¨é‡è¯„åˆ† 0-100
    
@dataclass
class StatusOutput:
    """çŠ¶æ€ä¿¡æ¯è¾“å‡º"""
    status_id: str
    timestamp: datetime.datetime
    
    # ç­–ç•¥çŠ¶æ€
    strategy_status: StrategyStatus
    
    # æ€§èƒ½æŒ‡æ ‡
    performance: StrategyPerformance
    
    # ç³»ç»Ÿèµ„æº
    cpu_usage: Decimal                 # CPUä½¿ç”¨ç‡
    memory_usage: Decimal              # å†…å­˜ä½¿ç”¨ç‡
    api_rate_limit_usage: Decimal      # APIé™åˆ¶ä½¿ç”¨ç‡
    
    # å‘Šè­¦ä¿¡æ¯
    warnings: List[str]
    errors: List[str]
    
    # ä¸‹æ¬¡æ›´æ–°æ—¶é—´
    next_update_time: datetime.datetime
```

## ğŸ”„ æ•°æ®æµè½¬è®¾è®¡

### 1. è¾“å…¥æ•°æ®èšåˆ

```python
@dataclass
class StrategyInput:
    """ç­–ç•¥æ¨¡å—å®Œæ•´è¾“å…¥"""
    market_data: MarketDataInput
    account_data: AccountDataInput
    order_data: OrderDataInput
    config: ConfigInput
    external_signals: ExternalSignalInput
    
    # è¾“å…¥å…ƒæ•°æ®
    input_id: str
    collection_start_time: datetime.datetime
    collection_end_time: datetime.datetime
    data_completeness: Dict[str, Decimal]  # å„æ•°æ®æºå®Œæ•´æ€§
```

### 2. è¾“å‡ºæ•°æ®æ‰“åŒ…

```python
@dataclass
class StrategyOutput:
    """ç­–ç•¥æ¨¡å—å®Œæ•´è¾“å‡º"""
    trading_signals: List[TradingSignal]
    risk_assessment: RiskAssessment
    execution_instructions: List[ExecutionInstruction]
    status: StatusOutput
    
    # è¾“å‡ºå…ƒæ•°æ®
    output_id: str
    processing_time: float              # å¤„ç†æ—¶é—´ï¼ˆç§’ï¼‰
    input_reference: str                # å¯¹åº”çš„è¾“å…¥ID
    generation_time: datetime.datetime
```

## ğŸ“Š æ•°æ®è´¨é‡è¦æ±‚

### 1. ç²¾åº¦è¦æ±‚

- **ä»·æ ¼ç²¾åº¦**: æœ€å°åˆ°å°æ•°ç‚¹å8ä½
- **æ•°é‡ç²¾åº¦**: æœ€å°åˆ°å°æ•°ç‚¹å8ä½  
- **æ—¶é—´ç²¾åº¦**: æ¯«ç§’çº§
- **æ¯”ä¾‹ç²¾åº¦**: æœ€å°åˆ°å°æ•°ç‚¹å6ä½

### 2. å®Œæ•´æ€§è¦æ±‚

- **å¿…éœ€å­—æ®µ**: ä¸å…è®¸ä¸ºç©ºçš„å…³é”®å­—æ®µ
- **æ•°æ®çª—å£**: ä¿è¯è¶³å¤Ÿçš„å†å²æ•°æ®æ·±åº¦
- **æ—¶é—´ä¸€è‡´æ€§**: ç¡®ä¿æ‰€æœ‰æ•°æ®æ—¶é—´æˆ³çš„ä¸€è‡´æ€§

### 3. å®æ—¶æ€§è¦æ±‚

- **å¸‚åœºæ•°æ®**: å»¶è¿Ÿ < 100ms
- **è´¦æˆ·æ•°æ®**: å»¶è¿Ÿ < 500ms  
- **è®¢å•æ•°æ®**: å»¶è¿Ÿ < 200ms

## ğŸ› ï¸ æ¥å£æ ‡å‡†åŒ–

### 1. ç­–ç•¥æ¨¡å—æ¥å£

```python
from abc import ABC, abstractmethod

class StrategyInterface(ABC):
    """ç­–ç•¥æ¨¡å—æ ‡å‡†æ¥å£"""
    
    @abstractmethod
    def process(self, strategy_input: StrategyInput) -> StrategyOutput:
        """
        ç­–ç•¥ä¸»å¤„ç†å‡½æ•°
        
        Args:
            strategy_input: æ ‡å‡†åŒ–è¾“å…¥æ•°æ®
            
        Returns:
            strategy_output: æ ‡å‡†åŒ–è¾“å‡ºæ•°æ®
        """
        pass
        
    @abstractmethod
    def validate_input(self, strategy_input: StrategyInput) -> bool:
        """éªŒè¯è¾“å…¥æ•°æ®å®Œæ•´æ€§å’Œæœ‰æ•ˆæ€§"""
        pass
        
    @abstractmethod
    def get_required_data(self) -> Dict[str, List[str]]:
        """è·å–ç­–ç•¥æ‰€éœ€çš„æ•°æ®ç±»å‹å’Œå­—æ®µ"""
        pass
```

## ğŸ“ æ€»ç»“

è¿™ä¸ªæ•°æ®æ¥å£è®¾è®¡å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

1. **é«˜ç²¾åº¦**: ä½¿ç”¨Decimalç¡®ä¿ä»·æ ¼å’Œæ•°é‡çš„ç²¾ç¡®æ€§
2. **å®Œæ•´æ€§**: æ¶µç›–ç­–ç•¥å†³ç­–æ‰€éœ€çš„å…¨éƒ¨æ•°æ®ç»´åº¦
3. **æ ‡å‡†åŒ–**: ç»Ÿä¸€çš„æ•°æ®æ ¼å¼å’Œå‘½åè§„èŒƒ
4. **å¯æ‰©å±•**: æ”¯æŒæ–°å¢å­—æ®µå’Œæ•°æ®ç±»å‹
5. **å¯éªŒè¯**: æ˜ç¡®çš„æ•°æ®è´¨é‡å’Œå®Œæ•´æ€§è¦æ±‚

é€šè¿‡è¿™æ ·çš„æ¥å£è®¾è®¡ï¼Œç­–ç•¥æ¨¡å—å¯ä»¥ä¸“æ³¨äºäº¤æ˜“é€»è¾‘ï¼Œè€Œä¸éœ€è¦å…³å¿ƒæ•°æ®è·å–å’Œæ ¼å¼åŒ–çš„å¤æ‚æ€§ï¼ŒåŒæ—¶ç¡®ä¿è¾“å‡ºçš„äº¤æ˜“æŒ‡ä»¤èƒ½å¤Ÿè¢«æ‰§è¡Œæ¨¡å—å‡†ç¡®ç†è§£å’Œæ‰§è¡Œã€‚ 